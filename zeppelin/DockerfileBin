# Base java image
FROM base:latest

# Preconfigure image
ENV ZEPVER 0.7.2

# Download zeppelin
RUN wget -P /tmp http://apache.mirror.anlx.net/zeppelin/zeppelin-0.7.2/zeppelin-$ZEPVER-bin-all.tgz
RUN tar -xzf /tmp/zeppelin-$ZEPVER-bin-all.tgz -C /usr
RUN rm /tmp/zeppelin-$ZEPVER-bin-all.tgz
RUN mv /usr/zeppelin-$ZEPVER-bin-all /usr/zeppelin
RUN ls -l /usr/zeppelin/bin
WORKDIR /usr/zeppelin

# Install python components
RUN yum install -y python-pip python-devel gcc

# Configure image
RUN pip install --upgrade pip
RUN pip install virtualenv matplotlib seaborn


# Expose default zeppelin port
EXPOSE 8080

# RUN zeppelin
CMD ["/usr/zeppelin/bin/zeppelin.sh"]
