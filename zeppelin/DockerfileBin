# Base java image
FROM base:latest

# Preconfigure image
RUN apt-get install -y r-base

# Download zeppelin
RUN wget -P /tmp http://www-eu.apache.org/dist/zeppelin/zeppelin-0.7.2/zeppelin-0.7.2-bin-all.tgz
RUN tar -xzf /tmp/zeppelin-0.7.2-bin-all.tgz -C /usr
RUN rm /tmp/zeppelin-0.7.2-bin-all.tgz
RUN mv /usr/zeppelin-0.7.2-bin-all /usr/zeppelin
RUN ls -l /usr/zeppelin/bin
WORKDIR /usr/zeppelin

# Configure image
RUN pip install virtualenv
RUN pip install matplotlib

# Expose default zeppelin port
EXPOSE 8080

# RUN zeppelin
CMD ["/usr/zeppelin/bin/zeppelin.sh"]
